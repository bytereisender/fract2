# Структура пакетов CMS Fract2

## Содержание
1. [Обзор](#обзор)
2. [Структура пакетов](#структура-пакетов)
3. [Основные пакеты](#основные-пакеты)
4. [Пользовательские пакеты](#пользовательские-пакеты)
5. [Управление пакетами](#управление-пакетами)
6. [Зависимости](#зависимости)
7. [Лучшие практики](#лучшие-практики)
8. [Разработка пакетов](#разработка-пакетов)
9. [Распространение пакетов](#распространение-пакетов)

## Обзор

Система пакетов является центральным компонентом архитектуры CMS Fract2. Она обеспечивает модульную и расширяемую структуру, которая позволяет разработчикам добавлять новые функции или модифицировать существующие без изменения ядра системы. Этот документ описывает структуру и управление пакетами в CMS Fract2.

## Структура пакетов

Типичный пакет Fract2 имеет следующую структуру:

```
имя-пакета/
├── config/
│   └── config.yaml
├── src/
│   ├── Functions/
│   ├── Handlers/
│   └── Services/
├── templates/
├── assets/
│   ├── css/
│   ├── js/
│   └── images/
├── migrations/
├── tests/
└── package.yaml
```

- `config/`: Содержит конфигурации, специфичные для пакета
- `src/`: Содержит PHP исходный код пакета
  - `Functions/`: Содержит функциональные компоненты
  - `Handlers/`: Содержит обработчики запросов
  - `Services/`: Содержит сервисы и вспомогательные функции
- `templates/`: TWIG шаблоны для вывода
- `assets/`: Статические ресурсы, такие как CSS, JavaScript и изображения
- `migrations/`: Миграции базы данных для пакета
- `tests/`: Модульные и интеграционные тесты
- `package.yaml`: Метаданные и конфигурация пакета

## Основные пакеты

CMS Fract2 включает следующие основные пакеты:

1. **f2.core**: Базовая функциональность CMS
2. **f2.users**: Управление пользователями и аутентификация
3. **f2.content**: Управление и администрирование контента
4. **f2.media**: Управление медиа-файлами
5. **f2.seo**: Оптимизации и инструменты SEO

Эти основные пакеты предоставляют фундаментальную функциональность CMS и служат примерами для разработки пользовательских пакетов.

## Пользовательские пакеты

Разработчики могут создавать свои собственные пакеты для расширения функциональности Fract2. Пользовательский пакет должен:

1. Следовать структуре, описанной выше
2. Использовать уникальный префикс пространства имен
3. Содержать четкую документацию и комментарии
4. Предоставлять модульные тесты для критических функциональностей

## Управление пакетами

CMS Fract2 использует свою собственную систему управления пакетами:

- Установка: `php fract2 package:install имя-пакета`
- Обновление: `php fract2 package:update имя-пакета`
- Удаление: `php fract2 package:remove имя-пакета`
- Активация/Деактивация: `php fract2 package:toggle имя-пакета`

Эти команды взаимодействуют с системой пакетов для управления жизненным циклом пакетов в CMS.

## Зависимости

Зависимости пакетов определяются в файле `package.yaml`:

```yaml
name: мой-пакет
version: 1.0.0
dependencies:
  - f2.core: "^2.0"
  - f2.users: "^1.5"
```

Система управления пакетами автоматически разрешает зависимости и обеспечивает установку всех необходимых пакетов.

## Лучшие практики

1. Держите пакеты как можно меньшими и сфокусированными
2. Используйте функциональное программирование, где это имеет смысл
3. Следуйте стандартам кодирования Fract2
4. Тщательно документируйте публичные API
5. Пишите исчерпывающие тесты для ваших пакетов
6. Используйте семантическое версионирование для ваших пакетов
7. Избегайте тесной связанности между пакетами
8. Используйте внедрение зависимостей для лучшей модульности

## Разработка пакетов

При разработке нового пакета:

1. Используйте команду создания пакета: `php fract2 package:create имя-пакета`
2. Реализуйте требуемые интерфейсы и хуки
3. Используйте API Fract2 для взаимодействия с основными функциями
4. Следуйте соглашениям об именовании для функций, обработчиков и сервисов
5. Используйте встроенный контейнер внедрения зависимостей
6. Используйте существующие основные пакеты, а не изобретайте функциональность заново

## Распространение пакетов

Для распространения вашего пакета:

1. Убедитесь, что все тесты проходят и пакет хорошо документирован
2. Создайте файл `README.md` с инструкциями по установке и использованию
3. Используйте команду сборки пакета: `php fract2 package:build имя-пакета`
4. Опубликуйте ваш пакет в репозитории пакетов Fract2 или вашем собственном канале распространения

Помните, что распространяемые пакеты должны быть автономными и не должны полагаться на внешние ресурсы, которые могут быть недоступны в системе конечного пользователя.

Следуя этим рекомендациям, вы можете создавать надежные и поддерживаемые пакеты, которые расширяют функциональность CMS Fract2, придерживаясь при этом ее принципов простоты и эффективности.